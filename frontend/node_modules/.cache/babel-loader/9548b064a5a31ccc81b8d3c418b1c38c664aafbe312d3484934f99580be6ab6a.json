{"ast":null,"code":"// src/auth/AuthProvider.jsx\nimport React,{createContext,useContext,useEffect,useState}from'react';// Local storage keys\nimport{jsx as _jsx}from\"react/jsx-runtime\";const AUTH_KEY='insightflow_auth';const USERS_KEY='insightflow_users';// --- Fake API (demo only) ---\n// Replace these with real API calls (axios/fetch) when ready.\nfunction fakeApiSignup(_ref){let{name,email,password}=_ref;const users=JSON.parse(localStorage.getItem(USERS_KEY)||'[]');if(users.find(u=>u.email===email)){return Promise.reject({message:'Email already registered'});}const user={id:Date.now(),name,email,password};users.push(user);localStorage.setItem(USERS_KEY,JSON.stringify(users));return Promise.resolve({token:'fake-jwt-'+user.id,user:{id:user.id,name:user.name,email:user.email}});}function fakeApiLogin(_ref2){let{email,password}=_ref2;const users=JSON.parse(localStorage.getItem(USERS_KEY)||'[]');const user=users.find(u=>u.email===email&&u.password===password);if(!user)return Promise.reject({message:'Invalid credentials'});return Promise.resolve({token:'fake-jwt-'+user.id,user:{id:user.id,name:user.name,email:user.email}});}const AuthContext=/*#__PURE__*/createContext(null);export function useAuth(){return useContext(AuthContext);}export function AuthProvider(_ref3){let{children}=_ref3;const[user,setUser]=useState(null);const[token,setToken]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const saved=JSON.parse(localStorage.getItem(AUTH_KEY)||'null');if(saved&&saved.token&&saved.user){setToken(saved.token);setUser(saved.user);}setLoading(false);},[]);useEffect(()=>{if(token&&user){localStorage.setItem(AUTH_KEY,JSON.stringify({token,user}));}else{localStorage.removeItem(AUTH_KEY);}},[token,user]);const signup=async _ref4=>{let{name,email,password}=_ref4;const res=await fakeApiSignup({name,email,password});setToken(res.token);setUser(res.user);return res;};const signin=async _ref5=>{let{email,password}=_ref5;const res=await fakeApiLogin({email,password});setToken(res.token);setUser(res.user);return res;};const signout=()=>{setToken(null);setUser(null);};const value={user,token,loading,signup,signin,signout};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});}","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","jsx","_jsx","AUTH_KEY","USERS_KEY","fakeApiSignup","_ref","name","email","password","users","JSON","parse","localStorage","getItem","find","u","Promise","reject","message","user","id","Date","now","push","setItem","stringify","resolve","token","fakeApiLogin","_ref2","AuthContext","useAuth","AuthProvider","_ref3","children","setUser","setToken","loading","setLoading","saved","removeItem","signup","_ref4","res","signin","_ref5","signout","value","Provider"],"sources":["/Users/shuvabiswas/report-generator/frontend/src/auth/AuthProvider.jsx"],"sourcesContent":["// src/auth/AuthProvider.jsx\nimport React, { createContext, useContext, useEffect, useState } from 'react';\n\n// Local storage keys\nconst AUTH_KEY = 'insightflow_auth';\nconst USERS_KEY = 'insightflow_users';\n\n// --- Fake API (demo only) ---\n// Replace these with real API calls (axios/fetch) when ready.\nfunction fakeApiSignup({ name, email, password }) {\n  const users = JSON.parse(localStorage.getItem(USERS_KEY) || '[]');\n  if (users.find(u => u.email === email)) {\n    return Promise.reject({ message: 'Email already registered' });\n  }\n  const user = { id: Date.now(), name, email, password };\n  users.push(user);\n  localStorage.setItem(USERS_KEY, JSON.stringify(users));\n  return Promise.resolve({ token: 'fake-jwt-' + user.id, user: { id: user.id, name: user.name, email: user.email } });\n}\n\nfunction fakeApiLogin({ email, password }) {\n  const users = JSON.parse(localStorage.getItem(USERS_KEY) || '[]');\n  const user = users.find(u => u.email === email && u.password === password);\n  if (!user) return Promise.reject({ message: 'Invalid credentials' });\n  return Promise.resolve({ token: 'fake-jwt-' + user.id, user: { id: user.id, name: user.name, email: user.email } });\n}\n\nconst AuthContext = createContext(null);\n\nexport function useAuth() {\n  return useContext(AuthContext);\n}\n\nexport function AuthProvider({ children }) {\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const saved = JSON.parse(localStorage.getItem(AUTH_KEY) || 'null');\n    if (saved && saved.token && saved.user) {\n      setToken(saved.token);\n      setUser(saved.user);\n    }\n    setLoading(false);\n  }, []);\n\n  useEffect(() => {\n    if (token && user) {\n      localStorage.setItem(AUTH_KEY, JSON.stringify({ token, user }));\n    } else {\n      localStorage.removeItem(AUTH_KEY);\n    }\n  }, [token, user]);\n\n  const signup = async ({ name, email, password }) => {\n    const res = await fakeApiSignup({ name, email, password });\n    setToken(res.token);\n    setUser(res.user);\n    return res;\n  };\n\n  const signin = async ({ email, password }) => {\n    const res = await fakeApiLogin({ email, password });\n    setToken(res.token);\n    setUser(res.user);\n    return res;\n  };\n\n  const signout = () => {\n    setToken(null);\n    setUser(null);\n  };\n\n  const value = { user, token, loading, signup, signin, signout };\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}