{"ast":null,"code":"var _jsxFileName = \"/Users/shuvabiswas/report-generator/frontend/src/auth/AuthProvider.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/auth/AuthProvider.jsx\nimport React, { createContext, useContext, useEffect, useState } from 'react';\n\n// Simple mock auth service (replace with real API calls)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AUTH_KEY = 'insightflow_auth';\nfunction fakeApiSignup({\n  name,\n  email,\n  password\n}) {\n  // Very small fake: store user record in localStorage (do NOT use in production)\n  const users = JSON.parse(localStorage.getItem('insightflow_users') || '[]');\n  if (users.find(u => u.email === email)) {\n    return Promise.reject({\n      message: 'Email already registered'\n    });\n  }\n  const user = {\n    id: Date.now(),\n    name,\n    email,\n    password\n  };\n  users.push(user);\n  localStorage.setItem('insightflow_users', JSON.stringify(users));\n  // return a fake token\n  return Promise.resolve({\n    token: 'fake-jwt-' + user.id,\n    user: {\n      id: user.id,\n      name: user.name,\n      email: user.email\n    }\n  });\n}\nfunction fakeApiLogin({\n  email,\n  password\n}) {\n  const users = JSON.parse(localStorage.getItem('insightflow_users') || '[]');\n  const user = users.find(u => u.email === email && u.password === password);\n  if (!user) return Promise.reject({\n    message: 'Invalid credentials'\n  });\n  return Promise.resolve({\n    token: 'fake-jwt-' + user.id,\n    user: {\n      id: user.id,\n      name: user.name,\n      email: user.email\n    }\n  });\n}\nconst AuthContext = /*#__PURE__*/createContext(null);\nexport function useAuth() {\n  _s();\n  return useContext(AuthContext);\n}\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport function AuthProvider({\n  children\n}) {\n  _s2();\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    // Load from localStorage if present\n    const saved = JSON.parse(localStorage.getItem(AUTH_KEY) || 'null');\n    if (saved && saved.token && saved.user) {\n      setToken(saved.token);\n      setUser(saved.user);\n    }\n    setLoading(false);\n  }, []);\n  useEffect(() => {\n    // persist token+user\n    if (token && user) {\n      localStorage.setItem(AUTH_KEY, JSON.stringify({\n        token,\n        user\n      }));\n    } else {\n      localStorage.removeItem(AUTH_KEY);\n    }\n  }, [token, user]);\n  const signup = async ({\n    name,\n    email,\n    password\n  }) => {\n    const res = await fakeApiSignup({\n      name,\n      email,\n      password\n    });\n    setToken(res.token);\n    setUser(res.user);\n    return res;\n  };\n  const signin = async ({\n    email,\n    password\n  }) => {\n    const res = await fakeApiLogin({\n      email,\n      password\n    });\n    setToken(res.token);\n    setUser(res.user);\n    return res;\n  };\n  const signout = () => {\n    setToken(null);\n    setUser(null);\n    // side-effect: localStorage cleared by effect above\n  };\n  const value = {\n    user,\n    token,\n    loading,\n    signup,\n    signin,\n    signout\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 10\n  }, this);\n}\n_s2(AuthProvider, \"Xu4eKkZgr0oKfKhPsnk4ElTFcXI=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","jsxDEV","_jsxDEV","AUTH_KEY","fakeApiSignup","name","email","password","users","JSON","parse","localStorage","getItem","find","u","Promise","reject","message","user","id","Date","now","push","setItem","stringify","resolve","token","fakeApiLogin","AuthContext","useAuth","_s","AuthProvider","children","_s2","setUser","setToken","loading","setLoading","saved","removeItem","signup","res","signin","signout","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/shuvabiswas/report-generator/frontend/src/auth/AuthProvider.jsx"],"sourcesContent":["// src/auth/AuthProvider.jsx\nimport React, { createContext, useContext, useEffect, useState } from 'react';\n\n// Simple mock auth service (replace with real API calls)\nconst AUTH_KEY = 'insightflow_auth';\n\nfunction fakeApiSignup({ name, email, password }) {\n  // Very small fake: store user record in localStorage (do NOT use in production)\n  const users = JSON.parse(localStorage.getItem('insightflow_users') || '[]');\n  if (users.find(u => u.email === email)) {\n    return Promise.reject({ message: 'Email already registered' });\n  }\n  const user = { id: Date.now(), name, email, password };\n  users.push(user);\n  localStorage.setItem('insightflow_users', JSON.stringify(users));\n  // return a fake token\n  return Promise.resolve({ token: 'fake-jwt-' + user.id, user: { id: user.id, name: user.name, email: user.email } });\n}\n\nfunction fakeApiLogin({ email, password }) {\n  const users = JSON.parse(localStorage.getItem('insightflow_users') || '[]');\n  const user = users.find(u => u.email === email && u.password === password);\n  if (!user) return Promise.reject({ message: 'Invalid credentials' });\n  return Promise.resolve({ token: 'fake-jwt-' + user.id, user: { id: user.id, name: user.name, email: user.email } });\n}\n\nconst AuthContext = createContext(null);\n\nexport function useAuth() {\n  return useContext(AuthContext);\n}\n\nexport function AuthProvider({ children }) {\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Load from localStorage if present\n    const saved = JSON.parse(localStorage.getItem(AUTH_KEY) || 'null');\n    if (saved && saved.token && saved.user) {\n      setToken(saved.token);\n      setUser(saved.user);\n    }\n    setLoading(false);\n  }, []);\n\n  useEffect(() => {\n    // persist token+user\n    if (token && user) {\n      localStorage.setItem(AUTH_KEY, JSON.stringify({ token, user }));\n    } else {\n      localStorage.removeItem(AUTH_KEY);\n    }\n  }, [token, user]);\n\n  const signup = async ({ name, email, password }) => {\n    const res = await fakeApiSignup({ name, email, password });\n    setToken(res.token);\n    setUser(res.user);\n    return res;\n  };\n\n  const signin = async ({ email, password }) => {\n    const res = await fakeApiLogin({ email, password });\n    setToken(res.token);\n    setUser(res.user);\n    return res;\n  };\n\n  const signout = () => {\n    setToken(null);\n    setUser(null);\n    // side-effect: localStorage cleared by effect above\n  };\n\n  const value = { user, token, loading, signup, signin, signout };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}