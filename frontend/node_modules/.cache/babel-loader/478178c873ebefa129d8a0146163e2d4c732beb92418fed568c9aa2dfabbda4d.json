{"ast":null,"code":"// src/pages/Login.jsx\nimport React,{useState}from'react';import{useLocation,useNavigate,Link}from'react-router-dom';import{useAuth}from'../auth/AuthProvider';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var _location$state,_location$state$from,_location$state2;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const[busy,setBusy]=useState(false);const auth=useAuth();const navigate=useNavigate();const location=useLocation();const from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||'/';const pendingReportKey=(_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.pendingReportKey;const submit=async e=>{e.preventDefault();setError('');setBusy(true);try{await auth.signin({email,password});if(pendingReportKey){// navigate back to analysis page and include key so page can load stored report\nnavigate(from,{replace:true,state:{pendingReportKey}});}else{navigate(from,{replace:true});}}catch(err){setError(err.message||'Login failed');}finally{setBusy(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"pf-page\",children:/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:420,margin:'36px auto'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"pf-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign in\"}),/*#__PURE__*/_jsx(\"p\",{className:\"pf-muted\",children:\"Sign in to access your analyses and saved reports.\"}),pendingReportKey&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:10,padding:10,background:'#fff7ed',borderRadius:8},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Sign in to continue:\"}),\" we generated a report for you \\u2014 after signing in we will reveal it automatically.\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,style:{marginTop:12},children:[error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'crimson',marginBottom:10},children:error}),/*#__PURE__*/_jsx(\"label\",{className:\"if-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"pf-input\",type:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(\"label\",{className:\"if-label\",style:{marginTop:10},children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"pf-input\",type:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,marginTop:14},children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"pf-primary\",disabled:busy,children:busy?'Signing in...':'Sign in'}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",className:\"pf-outlined\",style:{alignSelf:'center',padding:'8px 12px'},children:\"Create account\"})]})]})]})})});}","map":{"version":3,"names":["React","useState","useLocation","useNavigate","Link","useAuth","jsx","_jsx","jsxs","_jsxs","Login","_location$state","_location$state$from","_location$state2","email","setEmail","password","setPassword","error","setError","busy","setBusy","auth","navigate","location","from","state","pathname","pendingReportKey","submit","e","preventDefault","signin","replace","err","message","className","children","style","maxWidth","margin","marginBottom","padding","background","borderRadius","onSubmit","marginTop","color","type","value","onChange","target","required","display","gap","disabled","to","alignSelf"],"sources":["/Users/shuvabiswas/report-generator/frontend/src/pages/Login.jsx"],"sourcesContent":["// src/pages/Login.jsx\nimport React, { useState } from 'react';\nimport { useLocation, useNavigate, Link } from 'react-router-dom';\nimport { useAuth } from '../auth/AuthProvider';\n\nexport default function Login() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [busy, setBusy] = useState(false);\n\n  const auth = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const from = location.state?.from?.pathname || '/';\n\n  const pendingReportKey = location.state?.pendingReportKey;\n\n  const submit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setBusy(true);\n    try {\n      await auth.signin({ email, password });\n\n      if (pendingReportKey) {\n        // navigate back to analysis page and include key so page can load stored report\n        navigate(from, { replace: true, state: { pendingReportKey } });\n      } else {\n        navigate(from, { replace: true });\n      }\n    } catch (err) {\n      setError(err.message || 'Login failed');\n    } finally {\n      setBusy(false);\n    }\n  };\n\n  return (\n    <div className=\"pf-page\">\n      <div style={{ maxWidth: 420, margin: '36px auto' }}>\n        <div className=\"pf-card\">\n          <h2>Sign in</h2>\n          <p className=\"pf-muted\">Sign in to access your analyses and saved reports.</p>\n\n          {pendingReportKey && (\n            <div style={{ marginBottom: 10, padding: 10, background: '#fff7ed', borderRadius: 8 }}>\n              <strong>Sign in to continue:</strong> we generated a report for you â€” after signing in we will reveal it automatically.\n            </div>\n          )}\n\n          <form onSubmit={submit} style={{ marginTop: 12 }}>\n            {error && <div style={{ color: 'crimson', marginBottom: 10 }}>{error}</div>}\n\n            <label className=\"if-label\">Email</label>\n            <input className=\"pf-input\" type=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} required />\n\n            <label className=\"if-label\" style={{ marginTop: 10 }}>Password</label>\n            <input className=\"pf-input\" type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} required />\n\n            <div style={{ display: 'flex', gap: 8, marginTop: 14 }}>\n              <button type=\"submit\" className=\"pf-primary\" disabled={busy}>{busy ? 'Signing in...' : 'Sign in'}</button>\n              <Link to=\"/signup\" className=\"pf-outlined\" style={{ alignSelf: 'center', padding: '8px 12px' }}>Create account</Link>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n    "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}